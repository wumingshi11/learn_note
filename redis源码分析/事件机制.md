# 初始化
初始化操作在initServer()函数中调用aeCreateEventLoop
## aeCreateEventLoop
redis通过一个aeEventLoop来记录事件相关结构。
```c
typedef struct aeEventLoop {
    int maxfd;   /* highest file descriptor currently registered */
    int setsize; /* max number of file descriptors tracked */
    long long timeEventNextId;
    time_t lastTime;     /* Used to detect system clock skew */
    aeFileEvent *events; /* Registered events */
    aeFiredEvent *fired; /* Fired events */
    aeTimeEvent *timeEventHead;
    int stop;
    void *apidata; /* This is used for polling API specific data */
    aeBeforeSleepProc *beforesleep;
} aeEventLoop;
```
函数中主对上述数据结构进行初始化后，调用aeApiCreate函数。
该函数对apidate进行初始化，即创造了一个epoll实例，但并未监听。
***aeAoiCrete针对不同的操作系统实现了不同版本***

## listenToPort
1. 创建socket
2. bind, listen, setResueAddr
3. 设置非阻塞

## 创建unix套接字
创建并监听

## 将创建的套接字加入到aeEventLoop中
1. 最重要的是注册廉价到达后的处理函数，处理函数具体内容见下节。


# 事件处理函数
## TCP连接处理函数
## 本地连接处理函数
